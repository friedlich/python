体验流程
想要顺利地爬取饿了么上面的餐厅列表，我们需要先自己前往饿了么网站，手动找到餐厅列表所在位置。然后，再用Python代码去模拟这个过程。

进入首页
首先，打开饿了么首页：https://www.ele.me/home/

打开【检查】工具，选择【Network】，勾选【Preserve log】（因为等会可能会有页面跳转，勾选上防止在跳转过程中请求被清空）。

practice08-1-2019125
输入地址
然后，输入地址，如：“腾讯大厦”（推荐先把文字打好，再利用复制粘贴一次性输入，不要一个字一个字填输），页面会弹出许多个地址给你选择。此刻，会看到右侧的Network面板里多出一个XHR：pois?……

这说明，这些地址列表和XHR之间存在有对应关系。记住这个XHR，它很重要，后面会用到。

进入详情页
我们先点击一个地址，比如我选择的第0个，“腾讯大厦”，它会跳转至一个新地址：https://www.ele.me/place/ws100xkkpznf?latitude=22.54055&longitude=113.934401

practice08-2-2019125
体验登录
此时，页面要求我们登录。我们点击登录，会来到https://h5.ele.me/login/#redirect=https%3A%2F%2Fwww.ele.me%2Fplace%2Fws100xkkpznf%3Flatitude%3D22.54055%26longitude%3D113.934401

practice08-3-2019125
阅读该URL，很容易能够看出这个是一个登录页，因为有login存在。

同时它在?之后所携带的参数，含义是来源：我们刚刚从哪个URL跳转过来。

输入手机号码，点击收取验证码，此时浏览器会发起请求：mobile_send_code。

手机收到验证码，输入验证码，完成登录。

获取餐馆列表
页面会重新跳转回我们刚刚来到的地址，此时的页面，出现了我们想要的餐馆名。

practice08-4-2019125
如图，最上方的login_by_mobile即是登录获取cookies的那个请求。

通过翻找Network，我们定位到，存储有餐厅列表的请求是XHR：restaurants…

该请求需要若干参数，如下：

extras[]：activities
geohash：通过搜索得之，这是一个能够代表地理位置的字符串。
latitude：纬度
limit：一次加载多少个餐馆
longitude：经度
offset：起始值
terminal: web
思考实现方案
这个网站，要求登录才能实现爬取餐馆列表。所以我们需要用到cookies来实现。

所以理论上，我们的代码顺序应该是：模拟登录获取cookies，再带着cookies去请求餐馆列表。

不过，必须要指出的是。请求餐馆列表，还需要一些参数才行。这些参数，和我们刚刚在首页输入“腾讯大厦”四个字的操作有关。

具体，我们在做代码实操时再展开讲解。

所以正确的过程应该是：

模拟登录获取cookies
模拟输入“腾讯大厦”获取必要的参数
带着参数和cookies，去请求餐馆列表
其中，前两步可以顺序调换。